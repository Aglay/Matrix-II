
MOD_OBJS	+=$(foreach source, $(MOD_SRCS), $(source).o)
MOD_OBJS_FULL	=$(foreach object, $(MOD_OBJS), $(WD)/$(object))
MOD_FILE	=$(MOD_NAME).ko
MOD_FILE_FULL	=$(WD)/$(MOD_NAME)
MOD_LDSCRIPT	=$(MOD_NAME).ld

default : target

include Makefile.compile

target : $(MOD_FILE)

$(MOD_FILE) : $(MOD_OBJS)
	$(QKECHO) LD $@
	$(Q)$(LD) $(LD_FLAGS) -T $(MOD_LDSCRIPT) -o $@ $(MOD_OBJS)

clean :
	$(QKECHO) CLEAN $(WD)
	$(Q)$(RM) $(MOD_OBJS)

